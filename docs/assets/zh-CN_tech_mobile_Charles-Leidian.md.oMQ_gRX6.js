import{_ as i,D as e,c,k as n,a,I as l,R as t,o as s}from"./chunks/framework.DUfc2l7r.js";const f=JSON.parse('{"title":"雷电模拟器 + Charles解决App抓包","description":"","frontmatter":{"editLink":true},"headers":[],"relativePath":"zh-CN/tech/mobile/Charles-Leidian.md","filePath":"zh-CN/tech/mobile/Charles-Leidian.md","lastUpdated":null}'),r={name:"zh-CN/tech/mobile/Charles-Leidian.md"},h=t('<h1 id="雷电模拟器-charles解决app抓包" tabindex="-1">雷电模拟器 + Charles解决App抓包 <a class="header-anchor vp-link" href="#雷电模拟器-charles解决app抓包" aria-label="Permalink to &quot;雷电模拟器 + Charles解决App抓包&quot;">​</a></h1><p><span style="color:var(--vp-c-brand-1);font-weight:bold;">作者：王磊</span></p><h2 id="背景" tabindex="-1">背景 <a class="header-anchor vp-link" href="#背景" aria-label="Permalink to &quot;背景&quot;">​</a></h2><p>大气产品、火情产品以及火情项目有很多apk，比如大气产品、火情产品、长沙火情、郑州火情、赣榆火情等等。在使用过程中经常会有app登陆不上或者其他问题，产品经理、项目经理或者测试都会找过来让定位是什么问题，大多数情况不是前端问题，所以并不想启动本地项目调试。</p><h2 id="前端怎么定位这写问题大概有这些方式" tabindex="-1">前端怎么定位这写问题大概有这些方式： <a class="header-anchor vp-link" href="#前端怎么定位这写问题大概有这些方式" aria-label="Permalink to &quot;前端怎么定位这写问题大概有这些方式：&quot;">​</a></h2><ol><li>安卓手机上安装Charles证书，用Charles查看请求;</li><li>本地启动对应项目，本地调试;</li><li>windows上安装雷电模拟器，配合Charles查看请求。</li></ol><h2 id="这几种方式都试过" tabindex="-1">这几种方式都试过： <a class="header-anchor vp-link" href="#这几种方式都试过" aria-label="Permalink to &quot;这几种方式都试过：&quot;">​</a></h2><ol><li>第一种咱们测试机是小米手机，安装Charles证书有点问题，咱们手头有时也没有安卓机;</li><li>第二种工作中经常用的，但是每次都需要本地起项目很麻烦;</li><li>最后一种是本次的重点。</li></ol><h2 id="雷电模拟器-charles抓包" tabindex="-1">雷电模拟器 + Charles抓包 <a class="header-anchor vp-link" href="#雷电模拟器-charles抓包" aria-label="Permalink to &quot;雷电模拟器 + Charles抓包&quot;">​</a></h2><h3 id="一、安装charles并注册" tabindex="-1">一、安装Charles并注册 <a class="header-anchor vp-link" href="#一、安装charles并注册" aria-label="Permalink to &quot;一、安装Charles并注册&quot;">​</a></h3>',10),d={href:"https://www.charlesproxy.com",class:"vp-link",target:"_blank",rel:"noreferrer"},p=n("code",null,"4.6.5",-1),m=n("li",null,"注册Charles，点击Charles->Help->Registered to弹出如下界面",-1),b=t(`<p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/1.png" alt=""></p><p>输入以下注册码，注册后<code>重启</code>就可以解除30天使用限制</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>Registered Name: https://zhile.io</span></span>
<span class="line"><span>License Key: 48891cf209c6d32bf4</span></span>
<span class="line"><span></span></span>
<span class="line"><span>charles 激活码在线生成</span></span>
<span class="line"><span>https://charles.wrbug.com</span></span></code></pre></div><h3 id="二、配置charles" tabindex="-1">二、配置Charles <a class="header-anchor vp-link" href="#二、配置charles" aria-label="Permalink to &quot;二、配置Charles&quot;">​</a></h3><h4 id="一-安装证书到本地计算机" tabindex="-1">（一）安装证书到本地计算机 <a class="header-anchor vp-link" href="#一-安装证书到本地计算机" aria-label="Permalink to &quot;（一）安装证书到本地计算机&quot;">​</a></h4><ol><li>点击Charles-&gt;Help-&gt;SSL Proxying-&gt;Install Charles Root Certificate弹出如下界面：</li></ol><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/2.png" alt=""></p><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/3.png" alt=""></p><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/4.png" alt=""></p><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/5.png" alt=""></p><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/6.png" alt=""></p><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/7.png" alt=""></p><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/8.png" alt=""></p><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/9.png" alt=""></p><h4 id="二-查看证书" tabindex="-1">（二）查看证书 <a class="header-anchor vp-link" href="#二-查看证书" aria-label="Permalink to &quot;（二）查看证书&quot;">​</a></h4><ol><li>还是选择安装证书</li></ol><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/10.png" alt=""></p><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/11.png" alt=""></p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>至此说明证书安装没有问题</p></div><h4 id="三-导出证书" tabindex="-1">（三）导出证书 <a class="header-anchor vp-link" href="#三-导出证书" aria-label="Permalink to &quot;（三）导出证书&quot;">​</a></h4><ol><li>点击Charles-&gt;Help-&gt;SSL Proxying-&gt;Save Charles Root Certificate</li></ol><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/12.png" alt=""></p><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/13.png" alt=""></p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>证书生成好备用</p></div><h4 id="四-charles端口配置" tabindex="-1">（四）Charles端口配置 <a class="header-anchor vp-link" href="#四-charles端口配置" aria-label="Permalink to &quot;（四）Charles端口配置&quot;">​</a></h4><ol><li>Proxy-&gt;Proxy Settings，配置如下，端口号自定义</li></ol><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/14.png" alt=""></p><ol start="2"><li>端口自定义，需要socks协议的可以勾选打开</li></ol><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/15.png" alt=""></p><ol start="3"><li>Proxy-&gt;SSL Proxying Settings，配置如下，端口号自定义</li></ol><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/16.png" alt=""></p><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/17.png" alt=""></p><ol start="4"><li>两个输入框都输入*，保存即可</li></ol><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/18.png" alt=""></p><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/19.png" alt=""></p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>到此，Charles配置完成，接下来安装和配置雷电模拟器</p></div><h3 id="三、安装雷电模拟器" tabindex="-1">三、安装雷电模拟器 <a class="header-anchor vp-link" href="#三、安装雷电模拟器" aria-label="Permalink to &quot;三、安装雷电模拟器&quot;">​</a></h3>`,37),g={href:"https://www.ldmnq.com",class:"vp-link",target:"_blank",rel:"noreferrer"},u=n("code",null,"9.0",-1),C=n("li",null,"安装过程不赘述，最后会生成两个图标，我们用雷电模拟器9就行",-1),_=t('<p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/20.png" alt=""></p><ol start="3"><li>这是打开界面，里面装了一下app</li></ol><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/21.png" alt=""></p><h3 id="四、配置雷电模拟器" tabindex="-1">四、配置雷电模拟器 <a class="header-anchor vp-link" href="#四、配置雷电模拟器" aria-label="Permalink to &quot;四、配置雷电模拟器&quot;">​</a></h3><h4 id="一-雷电模拟器基础设置" tabindex="-1">（一）雷电模拟器基础设置 <a class="header-anchor vp-link" href="#一-雷电模拟器基础设置" aria-label="Permalink to &quot;（一）雷电模拟器基础设置&quot;">​</a></h4><ol><li>打开设置</li></ol><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/22.png" alt=""></p><ol start="2"><li>性能设置 &gt; 磁盘共享 &gt; System.vmdk可写入</li></ol><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/23.png" alt=""></p><ol start="3"><li>网络设置 &gt; 网络桥接模式 &gt; 开启（此处可能要下载插件并重启）</li></ol><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/24.png" alt=""></p><ol start="4"><li>其他设置 &gt; 开启ROOT权限和ADB调试</li></ol><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/25.png" alt=""></p><h4 id="二-雷电模拟器安装charles证书" tabindex="-1">（二）雷电模拟器安装Charles证书 <a class="header-anchor vp-link" href="#二-雷电模拟器安装charles证书" aria-label="Permalink to &quot;（二）雷电模拟器安装Charles证书&quot;">​</a></h4><ol><li>把上面第二大步中的第三小步中Charles中导出的证书安装在雷电模拟器中，直接把证书拖到雷电模拟器中，文件进入雷电的文件系统，双击证书文件，会弹出一下弹出框</li></ol><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/26.png" alt=""></p><ol start="2"><li>随意输入证书名称</li></ol><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/27.png" alt=""></p><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/28.png" alt=""></p><h4 id="三-移动charles证书到雷电系统根目录" tabindex="-1">（三）移动Charles证书到雷电系统根目录 <a class="header-anchor vp-link" href="#三-移动charles证书到雷电系统根目录" aria-label="Permalink to &quot;（三）移动Charles证书到雷电系统根目录&quot;">​</a></h4><ol><li>雷电安装好的证书在<code>/data/misc/user/0/cacerts-added</code>目录下</li></ol><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/29.png" alt=""></p><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/30.png" alt=""></p><ol start="2"><li>依次按照<code>/data/misc/user/0/cacerts-added</code>目录找进来，就看到本次安装的证书，<code>.0</code>后缀的文件</li></ol><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/31.png" alt=""></p><ol start="3"><li>选中这个文件（雷电里没有复制按钮，<code>选中</code>即复制）</li></ol><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/32.png" alt=""></p><ol start="4"><li>同样的切换到<code>/system/etc/security/cacerts</code>目录</li></ol><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/33.png" alt=""></p><ol start="5"><li>顺着<code>/system/etc/security/cacerts</code>路径找进来</li></ol><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/34.png" alt=""></p><ol start="6"><li>点击左下角的三个点</li></ol><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/35.png" alt=""></p><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/36.png" alt=""></p><ol start="7"><li>提示操作已完成</li></ol><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/37.png" alt=""></p><ol start="8"><li>好了到了最后一步配置了</li></ol><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/38.png" alt=""></p><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/39.png" alt=""></p><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/40.png" alt=""></p><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/41.png" alt=""></p><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/42.png" alt=""></p><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/43.png" alt=""></p><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/44.png" alt=""></p><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/45.png" alt=""></p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>点击保存，至此所有配置结束</p></div><h3 id="五、成功抓到雷电模拟器上安装app的请求" tabindex="-1">五、成功抓到雷电模拟器上安装App的请求 <a class="header-anchor vp-link" href="#五、成功抓到雷电模拟器上安装app的请求" aria-label="Permalink to &quot;五、成功抓到雷电模拟器上安装App的请求&quot;">​</a></h3><p><img src="https://obs-nanjing.obs.cn-north-4.myhuaweicloud.com/static/Frontend%20technical%20documentation/blog/mobile/leidian%26Charles/46.png" alt=""></p>',48);function y(k,w,j,F,v,q){const o=e("i-ri-external-link-line");return s(),c("div",null,[h,n("ol",null,[n("li",null,[a("直接去"),n("a",d,[a("Charles官网"),l(o,{class:"link-icon"})]),a("下载安装包（当前版本是"),p,a("）")]),m]),b,n("ol",null,[n("li",null,[a("直接去"),n("a",g,[a("雷电官网"),l(o,{class:"link-icon"})]),a("下载安装包（当前版本是"),u,a("）")]),C]),_])}const x=i(r,[["render",y]]);export{f as __pageData,x as default};
